**ISR (In-Sync Replicas)** — это набор [[Реплика Раздела Кафка (Kafka Partition Replica)||реплик]], которые синхронизированы с лидером [[Раздел Топика Кафка (Kafka Topic Partition)||партиции]] и содержат актуальные данные.


### Как работает

- Каждая [[Раздел Топика Кафка (Kafka Topic Partition)||партиция]] в [[Кафка (Apache Kafka)||Kafka]] имеет лидера и фолловеров ([[Реплика Раздела Кафка (Kafka Partition Replica)||реплики]]).
- [[ISR (In-Sync Replicas)||ISR]] включает лидера и [[Реплика Раздела Кафка (Kafka Partition Replica)||реплики]], которые успевают подтверждать данные (`ack`) в пределах `replica.lag.time.max.ms`.
- Если [[Реплика Раздела Кафка (Kafka Partition Replica)||реплика]] отстаёт, она исключается из [[ISR (In-Sync Replicas)||ISR]], а если снова догоняет лидера, она возвращается.


### Зачем используется

- **Гарантирует [[Отказоустойчивость (Fault Tolerance)||отказоустойчивость]]** – если лидер выходит из строя, [[Кафка (Apache Kafka)||Kafka]] выбирает новый лидер из [[ISR (In-Sync Replicas)||ISR]].
- **Обеспечивает [[Согласованность (Консистентность, Consistency)||консистентность]] данных** – [[Потребитель Кафка (Kafka Consumer)||потребители]] читают только подтверждённые данные.
- **Баланс между производительностью и надёжностью** – можно настраивать, сколько [[Реплика Раздела Кафка (Kafka Partition Replica)||реплик]] должны подтвердить запись (`min.insync.replicas`).