**Kafka Партиция (Kafka Topic Partition)** — это подмножество [[Сообщение Кафка (Kafka Message)||сообщений]] внутри [[Топик Кафка (Kafka Topic)||топика]], которое позволяет распределять нагрузку и обрабатывать данные параллельно.


### Ключевые особенности

- Каждый [[Топик Кафка (Kafka Topic)||топик]] состоит из одной или нескольких [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]].
- [[Сообщение Кафка (Kafka Message)||Сообщения]] внутри [[Раздел Топика Кафка (Kafka Topic Partition)||партиции]] имеют строгий порядок ([[Очередь (Queue)||очередь FIFO]]).
- [[Раздел Топика Кафка (Kafka Topic Partition)||Партиции]] могут храниться на разных [[Брокер Кафка (Kafka Broker)||брокерах]] для балансировки нагрузки.
- [[Потребитель Кафка (Kafka Consumer)||Потребители]] читают данные из [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] параллельно, что повышает производительность.


### Как работает

- [[Производитель Кафка (Kafka Producer)||Producer]] отправляет [[Сообщение Кафка (Kafka Message)||сообщение]] → [[Кафка (Apache Kafka)||Kafka]] определяет, в какую [[Раздел Топика Кафка (Kafka Topic Partition)||партицию]] его записать.
- [[Брокер Кафка (Kafka Broker)||Broker]] сохраняет [[Сообщение Кафка (Kafka Message)||сообщение]] в определённой [[Раздел Топика Кафка (Kafka Topic Partition)||партиции]].
- [[Группа Потербителей Кафка (Kafka Consumer Group)||Consumer Group]] распределяет [[Раздел Топика Кафка (Kafka Topic Partition)||партиции]] между [[Потребитель Кафка (Kafka Consumer)||потребителями]].

Пример: если у [[Топик Кафка (Kafka Topic)||топика]] “orders” три [[Раздел Топика Кафка (Kafka Topic Partition)||партиции]], заказы распределяются между ними, и несколько сервисов могут их обрабатывать одновременно.


### Как создать

#### В новом [[Топик Кафка (Kafka Topic)||топике]]

С помощью команды `kafka-topics.sh` вы можете указать количество [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] при создании нового [[Топик Кафка (Kafka Topic)||топика]] с помощью флага `--partitions`.

Пример:

```bash
kafka-topics.sh --create --topic my_topic --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
```

Здесь:
- `--partitions 3` — создаёт 3 партиции для [[Топик Кафка (Kafka Topic)||топика]].
- `--replication-factor 1 `— указывает количество [[Репликация (Replication)||реплик]] для [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] (для простоты, можно указать 1 на локальной машине).

#### В существующем [[Топик Кафка (Kafka Topic)||топике]]

Вы можете изменить количество [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] уже существующего [[Топик Кафка (Kafka Topic)||топика]] с помощью команды `kafka-topics.sh` с флагом `--alter`.

Пример:

```bash
kafka-topics.sh --alter --topic my_topic --bootstrap-server localhost:9092 --partitions 5
```

Здесь:
• `--partitions 5` — изменяет количество [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] до 5.


Важно:

- Невозможно уменьшить количество [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] для существующего [[Топик Кафка (Kafka Topic)||топика]], только увеличить.
- После изменения количества [[Раздел Топика Кафка (Kafka Topic Partition)||партиций]] [[Кафка (Apache Kafka)||Kafka]] автоматически перераспределит данные между новыми [[Раздел Топика Кафка (Kafka Topic Partition)||партициями]].