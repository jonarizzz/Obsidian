**[[Куча (Heap)||Куча (heap)]]** — это область памяти, используемая для хранения объектов во время выполнения программы. Управление этой памятью осуществляется автоматически с помощью [[Сборщик Мусора (Garbage Collector)||сборщика мусора]].

### Основные характеристики:

- **Динамическое выделение памяти** – объекты создаются в куче с помощью `new`, а освобождаются автоматически.
- **Общий доступ** – все потоки могут работать с [[Объект (Object)||объектами]] в [[Куча (Heap)||куче]].
- **Гибкая структура** – в отличие от [[Stack (Область Памяти)||стека]], где память выделяется и освобождается по принципу `LIFO (Last-In, First-Out)`, куча не имеет строгой организации.
- **Производительность ниже, чем у [[Stack (Область Памяти)||стека]]** – из-за необходимости управления памятью.
  

### Разделение кучи в [[{TODO} JVM||JVM]]:

Современные [[{TODO} JVM||JVM]] делят кучу на несколько областей для оптимизации работы [[Сборщик Мусора (Garbage Collector)||сборщика мусора]]:
- **Young Generation (Молодое поколение)** – место, где создаются новые [[Объект (Object)||объекты]].
- **Eden** – область для новых [[Объект (Object)||объектов]].
- **Survivor (S0, S1)** – области, куда перемещаются выжившие [[Объект (Object)||объекты]] после первой очистки.
- **Old Generation (Старое поколение, Tenured)** – здесь живут долгоживущие [[Объект (Object)||объекты]].
- **Metaspace (вместо Permanent Generation с Java 8)** – хранит метаданные [[Класс (Class)||классов]].


### Как выделяется память в куче?

```java
class Example {
    int value; // поле хранится в куче, так как принадлежит объекту
	
    public static void main(String[] args) {
        Example ex = new Example(); // объект создается в куче
    }
}
```

Переменная `ex` хранится в **стеке**, но сам [[Объект (Object)||объект]] `Example` находится в куче.


### Управление памятью и сборщик мусора

JVM самостоятельно управляет кучей с помощью [[Сборщик Мусора (Garbage Collector)||GC]], который:
- Освобождает неиспользуемые [[Объект (Object)||объекты]].
- Оптимизирует память, предотвращая утечки.


Запустить [[Сборщик Мусора (Garbage Collector)||GC]] можно вручную (но это не гарантирует немедленного выполнения):

```java
System.gc();
```
