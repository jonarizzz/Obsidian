**Memory leak (утечка памяти) в Java** — это ситуация, когда программа продолжает потреблять память, даже если объекты больше не используются, но не могут быть освобождены [[Сборщик Мусора (Garbage Collector)||сборщиком мусора]].

### Причины утечек памяти в Java:

- **Статические коллекции** – если статическая [[Collection (интерфейс)||коллекция]] (например, [[List (интерфейс)||List]], [[{TODO} Map (интерфейс)||Map]], [[{TODO} Set (интерфейс)||Set]]) хранит ссылки на объекты и не очищается вручную, объекты остаются в памяти на всё время работы приложения.
- **Неосвобождённые слушатели ([[Listeners||Listeners]]) и обработчики ([[Обратный Вызов (Callback)||Callbacks]])** – если объект подписался на события через `addListener` и не отписался, он может остаться в памяти, даже если он больше не нужен.
- [[Вложенный Класс (Inner Class)||Вложенные]] и [[Анонимный Класс (Anonymous Class)||анонимные]] классы – вложенные классы могут неявно удерживать [[Ссылочный Тип Данных (Сильная Ссылка, Strong Reference, Link)||ссылку]] на внешний [[Объект (Object)||объект]], не позволяя ему освободиться.
- Проблемы с [[{TODO} Кэш (Cache)||кешированием]] – если кеш не имеет механизма удаления старых данных (например, [[{TODO} LRU (Least Recently Used)||LRU-кеш]]), объекты могут копиться и занимать всё больше памяти.
- [[Поток (Thread)||Потоки (Threads)]] – если [[Поток (Thread)||поток]] ссылается на [[Объект (Object)||объект]] и продолжает работать, [[Объект (Object)||объект]] не будет освобождён.
- Использование [[{TODO} ThreadLocal||ThreadLocal]] – объекты в [[{TODO} ThreadLocal||ThreadLocal]] могут остаться в памяти, если их явно не очистить (`remove()`).


### Как обнаружить утечки памяти?

- Использовать профайлеры:
	- `VisualVM`
	- `YourKit`
	- `JProfiler`
	- `Eclipse Memory Analyzer (MAT)`
- Включить [[Сборщик Мусора (Garbage Collector)||GC]]-логи (`-XX:+PrintGCDetails`) и следить за постоянным ростом памяти.
- Использовать инструменты анализа [[Heap (Область Памяти)||хипа]] (`jmap, jconsole, jvisualvm`).

  
### Как избежать утечек?

- Очищать [[Collection (интерфейс)||коллекции]] после использования.
- Удалять слушателей после использования (`removeListener`).
- Использовать [[Слабая Ссылка (WeakReference)||WeakReference]] и [[Мягкая Ссылка (SoftReference)||SoftReference]] для временных объектов.
- Правильно управлять потоками, избегая утечек через [[{TODO} ThreadLocal||ThreadLocal]].
