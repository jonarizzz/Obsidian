**SAGA (Сага)** — это [[{TODO} Архитектурные Паттерны (Architectural Patterns)||архитектурный паттерн]] управления [[Распределённая Транзакция (Distributed Transaction)||распределёнными транзакциями]], при котором последовательность локальных [[Транзакция (Transaction)||транзакций]] объединяется в одну логическую бизнес-операцию с возможностью компенсации в случае ошибки.


### Подходы

1. Оркестрация (Orchestration) — есть центральный `Saga Manager`, который управляет выполнением шагов и откатом при ошибках.

2. Хореография (Choreography) — каждый сервис сам реагирует на события и выполняет свою часть транзакции, без центрального управления.

  
### Пример

Оформление заказа в [[Микросервис (Microservice)||микросервисной]] архитектуре:
1. `Order Service` создаёт заказ.
2. `Payment Service` списывает деньги.
3. `Inventory Service` резервирует товар.
4. Если на каком-то шаге ошибка → компенсирующие действия (возврат денег, отмена заказа).

  
Используется в [[Микросервис (Microservice)||микросервисах]], где классические [[Распределённая Транзакция (Distributed Transaction)||распределённые транзакции]] ([[Двухфазный Коммит (Two-Phase Commit, 2PC)||2PC]]) невозможны.
