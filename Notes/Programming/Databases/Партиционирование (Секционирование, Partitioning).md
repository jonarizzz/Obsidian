Секционирование (или партиционирование) в [[База данных (БД, Database, DB)||базах данных]] — это процесс разделения [[Таблица БД (Database Table, DB Table)||таблицы]] на логические части, называемые секциями или партициями, для более эффективного хранения, управления и обработки данных. Каждая секция представляет собой подмножество данных таблицы, которое хранится отдельно, но логически относится к одной и той же [[Таблица БД (Database Table, DB Table)||таблице]].

### Для чего используется:

- **Ускорение запросов:** Вместо того чтобы сканировать всю таблицу, запросы могут быть ограничены одной или несколькими секциями, что уменьшает объем обрабатываемых данных.
- **Управление большими данными:** Большие таблицы легче администрировать, если они разбиты на более мелкие части.
- **Улучшение производительности:** Операции, такие как добавление, удаление или обновление данных, могут выполняться быстрее, если затрагивается только часть таблицы.
- **Хранение данных по разным устройствам:** Можно хранить разные секции на разных физических дисках для равномерного распределения нагрузки.
- **Удобное удаление устаревших данных:** Например, если секции создаются по дате, можно легко удалить устаревшие секции (архивные данные).

### Типы секционирования

- Секционирование по диапазону (Range Partitioning)
	- Данные делятся на секции на основе диапазонов значений в столбце.
	- Пример: Разделение таблицы по годам.
```sql
PARTITION BY RANGE (год)
PARTITIONS (
    PARTITION p1 VALUES LESS THAN (2010),
    PARTITION p2 VALUES LESS THAN (2020),
    PARTITION p3 VALUES LESS THAN (MAXVALUE)
);
```

- Секционирование по списку (List Partitioning)
	- Данные делятся на секции на основе заранее определенного списка значений.
	- Пример: Разделение по регионам.
```sql
PARTITION BY LIST (регион)
PARTITIONS (
    PARTITION p1 VALUES IN ('Север', 'Юг'),
    PARTITION p2 VALUES IN ('Восток', 'Запад')
);
```

- Хэш-секционирование (Hash Partitioning)
	- Данные распределяются случайным образом на основе [[Хэширование (Хэш-функция, Hash Function, Hashing)||хэш-функции]], что обеспечивает равномерное распределение данных.
	- Пример:
```sql
PARTITION BY HASH (id) PARTITIONS 4;
```

- Секционирование по ключу (Key Partitioning) – похоже на хэш-секционирование, но база данных сама выбирает оптимальную хэш-функцию.
- Секционирование по диапазону-хэшу (Composite Partitioning) – комбинация разных типов секционирования, например, сначала по диапазону, а затем по хэшу.

### Пример использования

Допустим, у вас есть таблица с миллионами записей о продажах за последние 10 лет. Если вы часто запрашиваете данные только за текущий год, вы можете разделить таблицу на секции по годам. Тогда запросы будут обрабатывать только одну секцию, а не сканировать всю таблицу.

### Ограничения секционирования

- Усложнение архитектуры: Требует продуманного проектирования.
- Дополнительные ресурсы: Некоторая дополнительная нагрузка на сервер для управления секциями.
- Особенности реализации: Не все СУБД поддерживают секционирование или делают это одинаково (например, MySQL, PostgreSQL, Oracle, SQL Server реализуют секционирование по-разному).