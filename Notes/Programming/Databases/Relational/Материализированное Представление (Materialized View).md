Материализованное представление (Materialized View) — это объект базы данных, который сохраняет результат выполнения запроса в физическом виде (в таблице) на диске, а не вычисляет его каждый раз при обращении, как это делает [[Представление (View)||обычное представление (view)]].

### Особенности материализованных представлений:

- Хранение данных – в отличие от обычных представлений, материализованные представления хранят данные на диске. Это позволяет ускорить выполнение сложных запросов, так как данные уже предварительно рассчитаны.
- Обновление данных:
	- Данные в материализованном представлении могут устаревать, так как они не обновляются автоматически в режиме реального времени.
	- Для обновления данных используется операция `refresh` (обновление):
		- Полное обновление (`FULL REFRESH`): пересчитывается и заменяется всё представление.
		- Инкрементальное обновление (`FAST REFRESH`): обновляются только изменения, если поддерживается.
- Использование [[Индекс (Index)||индексов]] – на материализованное представление можно создавать индексы, что дополнительно ускоряет выполнение запросов.

### Преимущества:

- Ускорение запросов: Полезно для агрегатов (например, SUM, COUNT, AVG) или сложных [[{TODO} Синтаксис JOIN||джойнов]], которые требуют много времени на вычисление.
- Снижение нагрузки на систему: Данные извлекаются из сохранённой копии, что снижает нагрузку на основную базу данных.

### Недостатки:

- Устаревание данных: Данные могут быть неактуальны, если представление не обновлено.
- Потребление ресурсов: Требует места для хранения и ресурсов для обновления.

  

### Пример (PostgreSQL):

```sql
-- Создание материализованного представления
CREATE MATERIALIZED VIEW sales_summary AS
SELECT product_id, SUM(quantity) AS total_quantity, SUM(price) AS total_price
FROM sales
GROUP BY product_id;

-- Обновление данных в представлении
REFRESH MATERIALIZED VIEW sales_summary;
```

### Применение:

Материализованные представления часто используются в аналитических и BI-системах для повышения производительности сложных отчетов и сводных таблиц.