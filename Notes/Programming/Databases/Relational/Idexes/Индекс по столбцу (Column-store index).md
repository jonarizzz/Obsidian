Индекс по столбцу (Column-store index) — это особый тип [[Индекс (Index)||индекса]], который используется для организации и ускорения запросов в базах данных, оптимизированных под аналитическую обработку данных. В отличие от классических строковых [[Индекс (Index)||индексов]] (Row-store index), которые организуют данные построчно, в колонковых индексах данные хранятся и индексируются по столбцам.

### Основные особенности:

- Хранение данных по столбцам:
	- Данные каждого столбца хранятся в отдельной структуре.
	- Это позволяет быстро читать только нужные столбцы, а не строки целиком, что особенно полезно для аналитических запросов с выборкой небольшого числа столбцов.
- Сжатие данных:
	- Данные в колонковых индексах обычно сильно сжаты, так как значения в пределах одного столбца часто имеют схожие характеристики (например, повторяющиеся значения или последовательные числа).
	- Сжатие уменьшает объем данных для чтения с диска и ускоряет операции.
- Оптимизация для аналитических запросов – запросы с агрегатными функциями (например, SUM, AVG, COUNT) выполняются быстрее, поскольку данные одного столбца считываются единым блоком, без необходимости “перебирать” ненужные столбцы.
- Векторная обработка – многие современные реализации индексов по столбцу поддерживают векторные вычисления, обрабатывая данные большими блоками, что еще больше ускоряет работу.

### Преимущества:

- Быстродействие аналитических запросов – подходят для [[{TODO} OLAP Система||OLAP-систем (Online Analytical Processing)]], где нужно обрабатывать большие объемы данных для отчетов или анализа.
- Сжатие данных – экономия места на диске.
- Эффективное сканирование – для аналитических задач часто важна скорость обработки запросов, выбирающих данные по нескольким столбцам (например, выборки или фильтрации).

### Недостатки:

- Неэффективность для OLTP – в [[{TODO} OLTP Система||системах OLTP (Online Transaction Processing)]], где характерна частая вставка, обновление и удаление данных, использование индексов по столбцу может быть медленным из-за необходимости перестройки структуры данных.
- Сложности с модификацией данных – вставка или обновление новых строк требует сжатия и пересчета данных, что может занимать значительное время.
- Повышенные требования к памяти – для обработки запросов с использованием колонковых индексов может потребоваться больше оперативной памяти.

### Где используются:

- Системы анализа больших данных (Big Data).
- Хранилища данных (Data Warehouses).
- BI-системы (Business Intelligence).
- Обработка логов и журналов.

### Реализации в разных СУБД:

- **Microsoft SQL Server**:
	- Поддерживает columnstore index для ускорения аналитических запросов.
	- Комбинирует rowstore и columnstore индексы в одном хранилище для гибкости.
- **PostgreSQL** – расширение cstore_fdw позволяет создавать колоночные индексы.
- **Oracle** – поддерживает индексирование по столбцам в рамках решений для аналитической обработки данных.
- **ClickHouse** – полностью основана на [[{TODO} Колонковые Базы Данных||колонковом хранении]], что делает ее высокоэффективной для анализа больших данных.
- **Apache Cassandra** и **HBase** – используют колонковый подход для работы с данными.