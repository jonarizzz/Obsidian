Индекс на основе битовой карты (Bitmap Index) — это тип [[Индекс (Index)||индекса]] в [[База данных (Database)||базах данных]], который представляет данные в виде битовых векторов. Каждый бит в таком векторе указывает на наличие или отсутствие определенного значения в соответствующей строке таблицы. Этот тип индекса особенно эффективен для обработки запросов на чтение, особенно в случаях, когда таблица содержит столбцы с небольшим числом уникальных значений (низкой кардинальностью), например, булевы значения, категории или статусы.

### Как работает:

- **Битовые векторы**: Для каждого уникального значения в столбце создается отдельный битовый вектор. Длина вектора равна количеству строк в таблице. Например, если есть столбец status с возможными значениями active, inactive и pending, то будет создано три битовых вектора:
	- Для active (1 — если строка имеет статус “active”, иначе 0),
	- Для inactive,
	- Для pending.
- **Операции на битовых векторах**: Запросы могут быть обработаны путем выполнения логических операций (AND, OR, NOT) над битовыми векторами. Например, запрос на поиск строк, где status = 'active' AND type = 'premium', выполнится путем битовой операции AND между двумя соответствующими битовыми векторами.
- **Сжатие**: Чтобы уменьшить объем памяти, битовые векторы часто сжимаются с использованием алгоритмов, таких как **Word-Aligned Hybrid (WAH)**, которые эффективно представляют последовательности одинаковых бит.

### Преимущества

- **Высокая производительность для чтения**: Bitmap Index особенно хорошо справляется с запросами, которые включают фильтрацию или агрегирование данных.
- **Эффективность в обработке запросов**: Логические операции на битовых масках выполняются очень быстро, что делает индексы идеальными для сложных аналитических запросов.
- **Компактность**: Для столбцов с низкой кардинальностью битовые индексы занимают меньше места по сравнению с B-деревом или другими традиционными индексами.
- **Поддержка нескольких условий**: Операции с несколькими условиями (например, комбинации WHERE с OR и AND) обрабатываются эффективно.

### Недостатки

- **Не подходит для столбцов с высокой кардинальностью**: Если столбец содержит много уникальных значений (например, идентификаторы или имена), размер битовых векторов становится слишком большим, что снижает эффективность.
- **Медленная вставка и обновление**: При изменении данных нужно обновлять битовые векторы, что может быть дорого по времени и ресурсам.
- **Не универсален**: Подходит только для запросов с фильтрацией, но неэффективен для поиска диапазонов или сортировки.

### Где используется?

- **Хранилища данных**: Например, в системах [[{TODO} OLAP Система||OLAP]], где объемы данных огромны, но основная нагрузка связана с чтением и аналитикой.
- **Аналитические базы данных**: В таких системах, как Apache Druid, ClickHouse, и Oracle Database, Bitmap Index широко используется для обработки запросов с высокой производительностью.
- **BI-инструменты**: Помогает ускорить построение отчетов и дашбордов.