**Foreign Key (внешний ключ)** — это ограничение, используемое в базах данных для обеспечения ссылочной целостности между двумя [[Таблица БД (Database Table, DB Table)||таблицами]]. Оно задаёт связь между столбцом (или столбцами) одной таблицы и [[Первичный Ключ (Primary Key)||первичным ключом]] (или [[Уникальный Ключ (Unique Key)||уникальным ключом]]) другой [[Таблица БД (Database Table, DB Table)||таблицы]].

### Основные особенности внешнего ключа:

- Связь между таблицами – Foreign Key в одной таблице ссылается на [[Первичный Ключ (Primary Key)||Primary Key]] (или [[Уникальный Ключ (Unique Key)||Unique Key]]) в другой таблице. Например, связь между таблицами `orders` и `customers`, где каждый заказ привязан к существующему клиенту.
- Обеспечение ссылочной целостности – внешний ключ предотвращает добавление данных в [[Таблица БД (Database Table, DB Table)||таблицу]], которые не имеют соответствующего значения в связанном столбце. Например, нельзя создать заказ для клиента, который отсутствует в таблице клиентов.

### Реакция на изменения:

Можно настроить действия при удалении (`ON DELETE`) или обновлении (`ON UPDATE`) записи в родительской таблице (той, на которую указывает Foreign Key). Доступны следующие варианты:

- `CASCADE`: Автоматическое удаление или обновление связанных записей.
- `SET NULL`: Значение внешнего ключа становится `NULL`.
- `RESTRICT`: Запрещает удаление или обновление родительской записи.
- `NO ACTION`: Похож на `RESTRICT`, но проверка выполняется после других операций.
- `SET DEFAULT`: Значение внешнего ключа устанавливается на значение по умолчанию.

### Пример создания Foreign Key:

``` sql
CREATE TABLE customers (
    id INT PRIMARY KEY,
    name VARCHAR(100)
);

CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    amount DECIMAL(10, 2),
    FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE CASCADE
);
```

В этом примере:
- Столбец `customer_id` в таблице `orders` является внешним ключом, который ссылается на столбец `id` таблицы `customers`.
- Если запись из таблицы `customers` удаляется, все связанные заказы в таблице `orders` также удаляются благодаря `ON DELETE CASCADE`.

### Преимущества:

- Поддержание консистентности данных.
- Упрощение работы с взаимосвязанными таблицами.

### Ограничения:

- Foreign Key может замедлять операции вставки и удаления, так как требуется проверка ссылочной целостности.
- Внешние ключи часто недоступны в NoSQL базах данных (например, MongoDB).

