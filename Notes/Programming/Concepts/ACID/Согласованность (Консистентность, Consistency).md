**Согласованность (Consistency)** — это принцип, который гарантирует, что после каждой [[Транзакция (Transaction)||транзакции]] данные остаются в целостном и допустимом состоянии, согласно правилам [[База данных (БД, Database, DB)||базы данных]] (ограничениям, ключам, связям).

Основная идея – если до [[Транзакция (Transaction)||транзакции]] данные были корректными, то после неё они тоже должны оставаться корректными.


### Как работает

- Соблюдаются [[Уникальный Ключ (Unique Key)||уникальные ключи]], ссылочная целостность, ограничения (`CHECK`, `NOT NULL`).
- Если транзакция нарушает согласованность, она [[Откат Транзакции (Rollback)||откатывается]] (`ROLLBACK`).


### Пример в [[{TODO} SQL||SQL]]

```sql
START TRANSACTION;
UPDATE orders SET total_price = -50 WHERE id = 1; -- Нарушает правило "цена не может быть отрицательной"
COMMIT; -- ❌ Ошибка! Транзакция не выполнится, так как нарушает ограничение `CHECK (total_price >= 0)`
```